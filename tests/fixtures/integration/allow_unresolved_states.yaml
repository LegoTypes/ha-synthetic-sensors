version: "1.0"

global_settings:
  device_identifier: "test_allow_unresolved_states"
  variables:
    grace_minutes: 15
  metadata:
    attribution: "Allow unresolved states test"

sensors:
  # test: tests/integration/test_alternate_handlers_runtime.py::test_allow_unresolved_states_behavior
  # test_sensor_unique_id: test_allow_unresolved_sensor
  # NOTE: Do NOT set `entity_id` here. Test will map `test_allow_unresolved_sensor` to backing entity via `sensor_to_backing_mapping` as per integration test guide.
  test_allow_unresolved_sensor:
    name: "Allow Unresolved States Sensor"
    formula: "state if state != 'unavailable' else 'sensor_unavailable'"
    allow_unresolved_states: true
    metadata:
      unit_of_measurement: "W"
      device_class: "power"


